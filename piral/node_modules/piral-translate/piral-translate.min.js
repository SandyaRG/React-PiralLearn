var piralTranslate=(()=>{var F=Object.create;var u=Object.defineProperty,U=Object.defineProperties,$=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,B=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var O=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&O(e,r,t[r]);if(x)for(var r of x(t))V.call(t,r)&&O(e,r,t[r]);return e},f=(e,t)=>U(e,D(t)),j=e=>u(e,"__esModule",{value:!0});var l=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var K=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Y=(e,t)=>{j(e);for(var r in t)u(e,r,{get:t[r],enumerable:!0})},Z=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of N(t))!h.call(e,a)&&a!=="default"&&u(e,a,{get:()=>t[a],enumerable:!(r=$(t,a))||r.enumerable});return e},i=e=>Z(j(u(e!=null?F(B(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var z=K((ye,v)=>{"use strict";var q=function(t){return H(t)&&!J(t)};function H(e){return!!e&&typeof e=="object"}function J(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||X(e)}var Q=typeof Symbol=="function"&&Symbol.for,W=Q?Symbol.for("react.element"):60103;function X(e){return e.$$typeof===W}function ee(e){return Array.isArray(e)?[]:{}}function p(e,t){return t.clone!==!1&&t.isMergeableObject(e)?g(ee(e),e,t):e}function te(e,t,r){return e.concat(t).map(function(a){return p(a,r)})}function re(e,t){if(!t.customMerge)return g;var r=t.customMerge(e);return typeof r=="function"?r:g}function ae(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function A(e){return Object.keys(e).concat(ae(e))}function S(e,t){try{return t in e}catch{return!1}}function ne(e,t){return S(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function se(e,t,r){var a={};return r.isMergeableObject(e)&&A(e).forEach(function(n){a[n]=p(e[n],r)}),A(t).forEach(function(n){ne(e,n)||(S(e,n)&&r.isMergeableObject(t[n])?a[n]=re(n,r)(e[n],t[n],r):a[n]=p(t[n],r))}),a}function g(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||te,r.isMergeableObject=r.isMergeableObject||q,r.cloneUnlessOtherwiseSpecified=p;var a=Array.isArray(t),n=Array.isArray(e),s=a===n;return s?a?r.arrayMerge(e,t,r):se(e,t,r):p(t,r)}g.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,n){return g(a,n,r)},{})};var oe=g;v.exports=oe});var be={};Y(be,{Languages:()=>me,PiralLanguagesPicker:()=>T,createLocaleApi:()=>ce,getUserLocale:()=>ue,setupLocalizer:()=>w,useDynamicLanguage:()=>fe,useTranslate:()=>pe});var P=i(l("piral-core")),T=(0,P.getPiralComponent)("LanguagesPicker");var k=i(z());function E(e){return{selectLanguage(t,r){t.dispatch(a=>{e.language=r;let n=a.language.selected,s=r;return setTimeout(()=>{t.emit("select-language",{previousLanguage:n,currentLanguage:s})},0),f(c({},a),{language:f(c({},a.language),{loading:r===void 0,selected:r})})})},translate(t,r,a){return e&&e.localizeGlobal(r,a)},setTranslations(t,r,a){e.messages[r]=a.global;for(let n of a.locals){let s=t.apis[n.name];if(s){let o=s.getTranslations();o[r]=n.value,s.setTranslations(o)}}},getTranslations(t,r){return{global:e.messages[r],locals:Object.keys(t.apis).map(a=>({name:a,value:t.apis[a].getTranslations()[r]}))}}}}function ie(e,t){return t?"...":""}function le(e,t){return e.replace(/{{\s*([A-Za-z0-9_.]+)\s*}}/g,(r,a)=>a in t?t[a]||"":`{{${a}}}`)}var M=class{constructor(t,r,a,n=ie){this.messages=t;this.language=r;this.languages=a;this.fallback=n}localizeGlobal(t,r){return this.localizeBase(t,r)}localizeLocal(t,r,a){let n=this.translateMessage(t,r,a);return n===void 0?this.localizeBase(r,a):n}localizeBase(t,r){let a=this.translateMessage(this.messages,t,r);return a===void 0?this.fallback(t,this.language):a}translateMessage(t,r,a){let n=this.language,s=n&&t[n],o=s&&s[r];return o&&(a?le(o,a):o)}};var C=i(l("piral-core")),_=e=>(0,C.defaultRender)(void 0);function w(e={}){let t=e.messages||{},r=Object.keys(t),a=r[0]||"en",n=e.language,o=(typeof n=="function"?n(r,a,"en"):n)||a;return new M(t,o,r.length?r:[o],e.fallback)}function ce(e=w()){return t=>(t.defineActions(E(e)),t.dispatch(r=>f(c({},r),{components:c({LanguagesPicker:_},r.components),language:{loading:!1,available:e.languages,selected:e.language}})),r=>{let a={};return{addTranslations(n,s=!0){let o=n;s?o.unshift(e.messages):o.push(e.messages),this.setTranslations(k.all(o))},getCurrentLanguage(n){let s=t.readState(o=>o.language.selected);if(n){n(s);let o=b=>{n(b.currentLanguage)};return r.on("select-language",o),()=>r.off("select-language",o)}return s},setTranslations(n){a=n},getTranslations(){return a},translate(n,s){return e.localizeLocal(a,n,s)}}})}var d=i(l("piral-core"));function ge(e,t){let r=d.cookie.getItem("_culture")||d.storage.getItem("locale");return r||(t?t.toLowerCase().substring(0,2):navigator.language?navigator.language.substring(0,2):e)}function ue(e,t,r){let a=ge(t,r||"");return e.indexOf(a)!==-1?a:t}var L=i(l("react")),m=i(l("piral-core"));function fe(e,t){let[r,a]=(0,L.useState)(e),{selectLanguage:n,setTranslations:s,getTranslations:o}=(0,m.useActions)();return(0,L.useEffect)(()=>{let b=!0,R=o(r);return n(void 0),t(r,R).then(y=>{b&&(s(r,y),n(r))},y=>console.error(y)),()=>{b=!1}},[r]),[r,a]}function pe(){let{translate:e}=(0,m.useActions)();return(0,m.useGlobalState)(t=>t.language.selected),e}var G=i(l("react")),I=i(l("piral-core"));var me=()=>{let{available:e,selected:t}=(0,I.useGlobalState)(r=>r.language);return G.createElement(T,{selected:t,available:e})};return be;})();
