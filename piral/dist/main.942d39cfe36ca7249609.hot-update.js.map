{"version":3,"file":"main.942d39cfe36ca7249609.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAHA;AAAA;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AASA;;;;;;;;ACxGA","sources":["webpack://piral/./src/component/Login.tsx","webpack://piral/webpack/runtime/getFullHash"],"sourcesContent":["import axios from 'axios';\r\nimport { useState } from 'react';\r\nimport '../style/login.css';\r\nimport {  signInWithEmailAndPassword   } from 'firebase/auth';\r\nimport { auth } from './Firebase';\r\nimport * as React from 'react';\r\nimport { errors, layout } from '../layout';\r\nimport { createRoot } from 'react-dom/client';\r\nimport { createInstance, Piral, createStandardApi } from 'piral';\r\n\r\nexport default function Login(){\r\n    const [validationMsg, setValidationMsg] = useState(\"\");\r\n    const [loginValues, setLoginValue] = useState({\r\n        email: '',\r\n        password: ''\r\n    });\r\n\r\n    function loginToApplication(){\r\n        // change to your feed URL here (either using feed.piral.cloud or your own service)\r\n        const feedUrl = 'https://feed.piral.cloud/api/v1/pilet/my-app-educare-pilet1-feed';\r\n\r\n        const instance = createInstance({\r\n        state: {\r\n            components: layout,\r\n            errorComponents: errors,\r\n        },\r\n        plugins: [...createStandardApi()],\r\n        requestPilets() {\r\n            return fetch(feedUrl)\r\n            .then((res) => res.json())\r\n            .then((res) => res.items);\r\n        },\r\n        });\r\n        const root = createRoot(document.querySelector('#app'));\r\n        //instance.root.setData(\"Role\",sessionStorage.getItem(\"Role\"));\r\n        //instance.root.setData(\"AuthToken\",sessionStorage.getItem(\"AuthToken\"));\r\n        root.render(<Piral instance={instance} />);\r\n    }\r\n    \r\n    function passToDShowAndHideMenu(e: any): void {\r\n        e.preventDefault();\r\n        signInWithEmailAndPassword(auth, loginValues.email, loginValues.password)\r\n        .then((userCredential: any) => {\r\n            // Signed in \r\n            const user = userCredential.user;\r\n            sessionStorage.setItem('AuthToken', userCredential.user.accessToken)\r\n            console.log(user);\r\n            axios.post('https://localhost:7090/api/User/GetUserData', loginValues               \r\n            ).then((res: any) => {\r\n                if(res?.data?.length === 0){\r\n                    setValidationMsg('Please Enter Valid Credentials');\r\n                }\r\n                else{\r\n                    sessionStorage.setItem(\"Role\", res?.data[0]?.role);\r\n                }\r\n                //props.roleId(res?.data[0]?.role === 'Admin' ? 1 : res?.data[0]?.role === 'Student' ? 2 : 0);\r\n                loginToApplication();\r\n            });\r\n        })\r\n        .catch((error) => {\r\n            const errorCode = error.code;\r\n            const errorMessage = error.message;\r\n            console.log(errorCode, errorMessage)\r\n        });\r\n    }\r\n\r\n    function handleChange(event: any){\r\n          const { name, value } = event.target;\r\n          setLoginValue({ ...loginValues, [name]: value });\r\n      }\r\n    return <div>\r\n<html lang=\"en\">\r\n    <head>\r\n        <title>Animated Login Form</title>\r\n    </head>\r\n    <body className='loginBody'> \r\n    <div className=\"loginContainer\">\r\n    <center> <h1> Educare </h1> </center>   \r\n    <form>  \r\n        <div className=\"txt_field\">      \r\n            <input type=\"text\" name=\"email\" onChange={handleChange} required/> \r\n            <span></span>\r\n            <label>Username </label>\r\n        </div>\r\n        <div className=\"txt_field\">   \r\n            <input type=\"password\" name=\"password\" onChange={handleChange} required/> \r\n            <span></span> \r\n            <label>Password </label>  \r\n        </div>\r\n        <div>\r\n            <span className=\"validationMsg\">{validationMsg}</span>\r\n        </div>  \r\n        <div className='loginDiv'>\r\n        <button className='loginbtn' type=\"button\" onClick={passToDShowAndHideMenu}>Login</button> \r\n        </div> \r\n        <div className='mt-20'>\r\n        </div>\r\n    </form>     \r\n    </div>   \r\n</body>  \r\n</html>\r\n\r\n\r\n    </div>\r\n}","__webpack_require__.h = () => (\"37cb2b57aef80074edde\")"],"names":[],"sourceRoot":""}